# 🎯 HR-специалисты и Кандидаты - Реализация

## ✅ Что уже сделано

### 1. База данных ✅
- Добавлено поле `role` в модель User ('candidate', 'hr')
- Добавлены поля `whatsapp` и `instagram` 
- Создана модель `Request` для запросов от HR к кандидатам

### 2. Регистрация ✅
- Добавлен выбор роли при регистрации:
  - 👤 Кандидат
  - 💼 HR-специалист
- Роль сохраняется в базе данных

### 3. Навигация ✅
- **Для HR-специалистов:**
  - Панель
  - Кандидаты
  - Профиль
  - Выйти

- **Для кандидатов:**
  - Панель
  - Анализ
  - 🔔 Уведомления (с красным значком при наличии)
  - Профиль
  - Выйти

## 🚧 Что нужно добавить

### 1. Страница "Кандидаты" для HR
**Файл:** Добавить функцию `candidates_page()`

**Функционал:**
- Список всех кандидатов
- Фильтры по навыкам
- Кнопка "Посмотреть профиль"

### 2. Страница просмотра профиля кандидата
**Файл:** Добавить функцию `candidate_view_page()`

**Функционал:**
- Полный профиль кандидата
- Резюме для скачивания
- Форма отправки запроса с сообщением
- Кнопка "Отправить запрос"

### 3. Страница уведомлений для кандидатов
**Файл:** Добавить функцию `notifications_page()`

**Функционал:**
- Список запросов от HR-специалистов
- Сообщение от HR
- Ссылки на WhatsApp, Instagram, LinkedIn HR-специалиста
- Статус (новый/просмотрен)

### 4. Роуты

```python
# Для HR-специалистов
@app.get("/candidates")  # Список кандидатов
@app.get("/candidate/{id}")  # Профиль кандидата
@app.post("/send-request")  # Отправка запроса

# Для кандидатов
@app.get("/notifications")  # Уведомления
@app.post("/mark-viewed/{request_id}")  # Отметить как просмотренное
```

## 📋 Структура Request

```python
class Request:
    id: int
    hr_id: int  # ID HR-специалиста
    candidate_id: int  # ID кандидата
    message: str  # Сообщение от HR
    status: str  # 'pending', 'viewed'
    created_at: datetime
    viewed_at: datetime | None
```

## 💡 Логика работы

### Сценарий 1: HR находит кандидата
1. HR заходит на страницу "/candidates"
2. Видит список кандидатов с навыками
3. Нажимает "Посмотреть профиль"
4. Видит полный профиль + резюме
5. Заполняет форму с сообщением
6. Нажимает "Отправить запрос"
7. Запрос создается в БД

### Сценарий 2: Кандидат получает запрос
1. Кандидат видит красный значок на 🔔
2. Переходит в "/notifications"
3. Видит список запросов
4. Каждый запрос содержит:
   - Имя HR-специалиста
   - Сообщение
   - Ссылки (WhatsApp, Instagram, LinkedIn)
   - Дату запроса
5. Может связаться с HR по ссылкам

## 🎨 Дизайн

### Страница кандидатов
```
┌─────────────────────────────────────┐
│ Кандидаты                           │
├─────────────────────────────────────┤
│ [Поиск по навыкам...]               │
├─────────────────────────────────────┤
│ 👤 Иван Иванов                      │
│    Python, Django, FastAPI          │
│    [Посмотреть профиль] ────────────┤
│                                     │
│ 👤 Мария Петрова                    │
│    React, TypeScript, Node.js       │
│    [Посмотреть профиль] ────────────┤
└─────────────────────────────────────┘
```

### Страница уведомлений
```
┌─────────────────────────────────────┐
│ Уведомления                         │
├─────────────────────────────────────┤
│ 💼 Компания "Tech Corp"             │
│ HR: Алексей Сидоров                 │
│ Сообщение: "Здравствуйте! Мы ищем  │
│ Python-разработчика..."             │
│                                     │
│ Связаться:                          │
│ [WhatsApp] [Instagram] [LinkedIn]   │
│                                     │
│ 2 часа назад                        │
├─────────────────────────────────────┤
│ 💼 Компания "StartUp Inc"           │
│ HR: Ольга Иванова                   │
│ ...                                 │
└─────────────────────────────────────┘
```

## 🔧 Технические детали

### Подсчет непрочитанных уведомлений
```python
def get_unread_count(user_id, db):
    return db.query(Request).filter(
        Request.candidate_id == user_id,
        Request.status == "pending"
    ).count()
```

### Отправка запроса
```python
@app.post("/send-request")
async def send_request(
    candidate_id: int = Form(...),
    message: str = Form(...),
    user: User = Depends(require_auth),
    db: Session = Depends(get_db)
):
    # Проверка что user.role == "hr"
    if user.role != "hr":
        raise HTTPException(403)
    
    request = Request(
        hr_id=user.id,
        candidate_id=candidate_id,
        message=message,
        status="pending"
    )
    db.add(request)
    db.commit()
    
    return RedirectResponse("/candidates")
```

## 📝 TODO

- [ ] Создать `candidates_page()`
- [ ] Создать `candidate_view_page(candidate, hr_user)`
- [ ] Создать `notifications_page(user, requests)`
- [ ] Добавить роут GET `/candidates`
- [ ] Добавить роут GET `/candidate/<id>`
- [ ] Добавить роут POST `/send-request`
- [ ] Добавить роут GET `/notifications`
- [ ] Добавить JS для отображения количества уведомлений
- [ ] Обновить профиль для добавления WhatsApp/Instagram

## 🎉 Результат

После реализации:
- HR сможет находить кандидатов
- HR сможет отправлять запросы с сообщениями
- Кандидаты будут видеть уведомления
- Кандидаты смогут связаться с HR по соцсетям
- Удобная система коммуникации

---

**Статус:** В процессе реализации
**Версия:** 3.0.0 - HR Edition
